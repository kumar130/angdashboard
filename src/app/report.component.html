<div class="page">

    <div class="header">
        <h1>AWS Tagging Compliance Dashboard</h1>
        <button routerLink="/" class="home-btn">Home</button>
    </div>

    <!-- Tag Input Section -->
    <div class="config-box">

        <h3>Enter Tag to Check Compliance</h3>

        <div class="tag-row">
            <input
                    type="text"
                    [(ngModel)]="tagKey"
                    placeholder="Tag Key (e.g. environment)"
            />

            <input
                    type="text"
                    [(ngModel)]="tagValue"
                    placeholder="Tag Value (e.g. sbx)"
            />

            <button (click)="generateReport()" class="generate-btn">
                Generate Report
            </button>
        </div>

    </div>

    <!-- Dashboard -->
    <div *ngIf="total > 0" class="dashboard">

        <div class="cards">
            <div class="card total">
                <h2>Total Resources</h2>
                <p>{{ total }}</p>
            </div>

            <div class="card ok">
                <h2>Compliant</h2>
                <p>{{ compliant }}</p>
            </div>

            <div class="card bad">
                <h2>Non-Compliant</h2>
                <p>{{ nonCompliant }}</p>
            </div>
        </div>

        <div class="chart-wrapper">
            <h3>Compliance Distribution</h3>
            <canvas id="complianceChart"></canvas>
        </div>

        <div class="resource-section">
            <h3>All Resources</h3>

            <table class="resource-table">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let r of evaluatedResources">
                    <td>{{ r.type }}</td>
                    <td>{{ r.name }}</td>
                    <td [class.ok]="r.status === 'Compliant'"
                        [class.bad]="r.status === 'Non-Compliant'">
                        {{ r.status }}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>

</div>
